---
/**
 * Footer Component : Footer avec liens sociaux et copyright
 * Epic 2.3 - FE-031
 * Epic 7.2 - FE-090 (i18n Traductions)
 * Epic 7.2 - FE-091c (Intl API formatDate)
 *
 * Features :
 * - Copyright avec année dynamique
 * - Liens sociaux (GitHub, LinkedIn, Email)
 * - Accessible (aria-label, target="_blank" securisé)
 * - Design tokens (Dark Mode First)
 * - Traductions FR/EN via dictionnaires JSON
 * - Date dernière maj formatée selon locale
 */

import frTranslations from '../i18n/fr.json';
import enTranslations from '../i18n/en.json';
import { tSync } from '../utils/i18n';
import { formatDate } from '../utils/intl';

interface Props {
  lang?: 'fr' | 'en';
}

const { lang = 'fr' } = Astro.props;
const translations = lang === 'fr' ? frTranslations : enTranslations;

// Liens sociaux
const socialLinks = [
  {
    name: 'GitHub',
    url: 'https://github.com/esdrasgbedozin',
    ariaLabel: tSync('footer.social.github', lang, translations),
  },
  {
    name: 'LinkedIn',
    url: 'https://linkedin.com/in/esdras-gbedozin-24b3a3271',
    ariaLabel: tSync('footer.social.linkedin', lang, translations),
  },
  {
    name: 'Email',
    url: 'mailto:ogbedozin@gmail.com',
    ariaLabel: tSync('footer.social.email', lang, translations),
  },
];

const currentYear = new Date().getFullYear();
const rightsText = tSync('footer.copyright', lang, translations);
const lastUpdated = formatDate(new Date(), lang);
const lastUpdatedLabel = tSync('footer.lastUpdated', lang, translations);
---

<footer class="border-t border-[var(--color-neutral-800)] mt-16">
  <div class="container mx-auto px-4 py-8 text-center">
    <!-- Social Links -->
    <div class="flex justify-center gap-6 mb-6">
      {
        socialLinks.map((link) => (
          <a
            href={link.url}
            aria-label={link.ariaLabel}
            target={link.name !== 'Email' ? '_blank' : undefined}
            rel={link.name !== 'Email' ? 'noopener noreferrer' : undefined}
            class="text-[var(--color-neutral-400)] hover:text-[var(--color-primary-500)] transition-colors text-lg"
          >
            {link.name}
          </a>
        ))
      }
    </div>

    <!-- Copyright -->
    <p class="text-[var(--color-neutral-500)] text-sm">
      &copy; {currentYear} Portfolio. {rightsText}.
    </p>

    <!-- Last Updated (Intl API Demo) -->
    <p class="text-[var(--color-neutral-600)] text-xs mt-2">
      {lastUpdatedLabel} : {lastUpdated}
    </p>
  </div>
</footer>
